<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El chamizo de MarÃ­a</title>

    <!-- Hoja de estilos -->
    <link rel="stylesheet" href="estilos.css">

    <!-- Fuente de Google -->
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&family=Tinos&family=Roboto&display=swap" rel="stylesheet">
</head>

<body>
    <!-- CONTENEDOR GENERAL -->
    <div class="wrapper">

        <!-- CABECERA -->
        <header>
            <h1>
                 <a href="/index.html">ğŸ  EL CHAMIZO DE MARÃA ğŸ </a>
            </h1>
        </header>

        <!-- MENÃš -->
        <nav>
            <ul>
                <li><a href="/aldea.html">Aldea</a></li>
                <li><a href="/planta1.html">Planta 1</a></li>
                <li><a href="/planta2.html">Planta 2</a></li>
                <li><a href="/chamizo-original.html">Chamizo original</a></li>
                <li><a href="/el-creador.html">El creador</a></li>
            </ul>
        </nav>

        <!-- CONTENIDO PRINCIPAL -->
         <div class="wrapper-content">
            <main class="content">

                <div id="image">
                    <img src="images/portada.png" alt="Foto del chamizo">
                </div>

                <p>
                    Bienvenido a <b>El chamizo de MarÃ­a â„¢</b>;
                    un megahuerto de Minecraft en el cual MarÃ­a planta, cuida y
                    recolecta a diario con mucho amor. Se especializa, sobre todo, en las
                    <span style="color: red;"> sandÃ­as</span>, pero tambiÃ©n en las <span style="color: orange;">
                    calabazas</span>, el <span style="color: rgb(223, 202, 12);">trigo</span>, la
                    <span style="color: rgb(148, 216, 46);">caÃ±a de azÃºcar</span>, las <span style="color: rgb(192, 125, 0);"> patatas</span> y las 
                    <span style="color: rgb(252, 142, 40);">zanahorias</span>. 
                    Y todo a cambio de una miseria de gemas.
                </p>

            </main>

            <aside id="sidebar">
                <!--BARRA LATERAL 1-->
                <section class="sidebar-block" id="verduras">
                    <h3>Verduras recolectadas</h3>
                    <ul>
                        <li>ğŸ‰ SandÃ­as: 1.790</li>
                        <li>ğŸƒ Calabazas: 940</li>
                        <li>ğŸŒ¾ Trigo: 650</li>
                        <li>ğŸŒ± CaÃ±a de azÃºcar: 210</li>
                        <li>ğŸ¥” Patatas: 98</li>
                        <li>ğŸ¥• Zanahorias: 456</li>
                    </ul>
                </section>


                <!--BARRA LATERAL 2-->
                <section class="sidebar-block" id="recolecciones">
                    <h3>PrÃ³ximas recolecciones</h3>
                    <ul>
                        <li>ğŸŒ³ Manzanero</li>
                        <li>ğŸ¥® Cacao</li>
                    </ul>
                </section>


                <!--BARRA LATERAL 3-->
                <section class="sidebar-block" id="procesados">
                    <h3>Procesados</h3>
                    <ul>
                        <li>ğŸ¥– Pan</li>
                        <li>ğŸ§ AzÃºcar</li>
                        <li>ğŸ  Patata cocida</li>
                        <li>â˜• Nesquik</li>
                    </ul>

                </section>
            </aside>
        </div>

         <!-- PIE DE PÃGINA -->
         <footer>
            <p>Â© El chamizo de MarÃ­a - Minecraft</p>
        </footer>
    </div>


    <!--MÃšSICA-->
    <div class="jukebox-container" onclick="toggleMusic()">
        <img src="https://minecraft.wiki/images/Jukebox_JE2_BE2.png" alt="Jukebox" id="jukebox-img">
        <p id="music-status">OFF</p>
        
        <audio id="bg-music" loop>
            <source src="/audio/cat.mp3" type="audio/mpeg">
        </audio>
    </div>

    <script>
    const audio = document.getElementById("bg-music");
    const jukebox = document.querySelector(".jukebox-container");

    // 1. Al cargar la pÃ¡gina, comprobar si la mÃºsica deberÃ­a estar sonando
    window.addEventListener('load', () => {
        const isPlaying = localStorage.getItem('musicPlaying') === 'true';
        const currentTime = localStorage.getItem('musicTime');

        if (currentTime) {
            audio.currentTime = parseFloat(currentTime);
        }

        if (isPlaying) {
            // Nota: El navegador puede bloquear el play automÃ¡tico
            // por lo que intentamos reproducir
            audio.play().catch(() => {
                console.log("El navegador bloqueÃ³ el autoplay. Se requiere un clic.");
                localStorage.setItem('musicPlaying', 'false');
            });
            updateUI(true);
        }
    });

    // 2. Guardar el tiempo actual constantemente
    setInterval(() => {
        if (!audio.paused) {
            localStorage.setItem('musicTime', audio.currentTime);
        }
    }, 1000);

    // 3. FunciÃ³n para encender/apagar
    function toggleMusic() {
        if (audio.paused) {
            audio.play();
            localStorage.setItem('musicPlaying', 'true');
            updateUI(true);
        } else {
            audio.pause();
            localStorage.setItem('musicPlaying', 'false');
            updateUI(false);
        }
    }

    function updateUI(playing) {
        const status = document.getElementById("music-status");
        if (playing) {
            jukebox.classList.add("playing");
            status.innerText = "ON";
        } else {
            jukebox.classList.remove("playing");
            status.innerText = "OFF";
        }
    }
    </script>

</body>
</html>